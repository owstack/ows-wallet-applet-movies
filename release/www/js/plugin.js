"use strict";angular.module("owsWalletPlugin",["gettext","ionic","ngLodash","owsWalletPluginClient","owsWalletPlugin.services","owsWalletPlugin.controllers"]),angular.module("owsWalletPlugin.controllers",[]),angular.module("owsWalletPlugin.services",[]),angular.module("owsWalletPlugin").run(["gettextCatalog",function(gettextCatalog){}]),angular.module("owsWalletPlugin.controllers").controller("HomeCtrl",function($scope,$rootScope,$log,$timeout,CContext,$ionicSlideBoxDelegate){var _session,_applet,_prefs,self=this,SESSION_KEY_PREFS="preferences";$rootScope.$on("Client/Start",function(event,error){error?$log.debug("Client startup error: "+error.message+" ("+error.statusCode+")"):self.init()}),this.init=function(){CContext.getSession().then(function(session){return _session=session,_session.getApplet()}).catch(function(error){throw $log.debug("Failed to get session: "+error.message+" ("+error.statusCode+")"),error}).then(function(applet){_applet=applet,_applet.propertySet({title:"Just Goodbye"}),self.readPreferences(),self.initSlidebox(),_applet.hideSplash(1e3)}).catch(function(error){$log.debug("Failed to Initialize: "+error.message+" ("+error.statusCode+")")})},this.readPreferences=function(){_session.get(SESSION_KEY_PREFS).then(function(value){_prefs=value}).catch(function(error){$log.debug("Failed to read preferences: "+error.message+" ("+error.statusCode+")")})},this.savePreferences=function(){_session.set(SESSION_KEY_PREFS,_prefs),_session.flush()},$rootScope.$on("Local/AppletLeave",function(event,applet,wallet){self.savePreferences()}),this.initSlidebox=function(){self.slideIndex=0},this.next=function(){$ionicSlideBoxDelegate.next()},this.previous=function(){$ionicSlideBoxDelegate.previous()},this.slideChanged=function(index){self.slideIndex=index}}),angular.module("owsWalletPlugin.controllers").controller("IndexCtrl",function($scope,$log){$log.info("Running owsWalletPlugin index controller")});