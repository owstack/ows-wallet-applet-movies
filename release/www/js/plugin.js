"use strict";angular.module("owsWalletPlugin",["gettext","ionic","ngLodash","owsWalletPluginClient","owsWalletPlugin.services","owsWalletPlugin.controllers"]),angular.module("owsWalletPlugin.controllers",[]),angular.module("owsWalletPlugin.services",[]),angular.module("owsWalletPlugin").config(function($urlRouterProvider,$stateProvider){$urlRouterProvider.otherwise("/home"),$stateProvider.state("home",{url:"/home",controller:"HomeCtrl",templateUrl:"views/home/home.html"}).state("page1",{url:"/page1",templateUrl:"views/page1/page1.html"}).state("page2",{url:"/page2",templateUrl:"views/page2/page2.html"}).state("page3",{url:"/page3",templateUrl:"views/page3/page3.html"})}).run(function($rootScope,$ionicPlatform,$state){$ionicPlatform.ready(function(){$state.go("home")}),$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){console.log("Route change start from:",fromState.name||"-"," to:",toState.name)})}),angular.module("owsWalletPlugin.controllers").controller("IndexCtrl",function($scope,$log){$log.info("Running owsWalletPlugin index controller")}),angular.module("owsWalletPlugin").run(["gettextCatalog",function(gettextCatalog){}]),angular.module("owsWalletPlugin.controllers").controller("HomeCtrl",function($scope,$rootScope,$log,$timeout,CContext,$ionicSlideBoxDelegate){var _session,_applet,_prefs,self=this;$rootScope.$on("Client/Start",function(event,error){error?$log.debug("Client startup error: "+error.message+" ("+error.statusCode+")"):self.init()}),$rootScope.$on("Local/AppletLeave",function(event,applet,wallet){self.savePreferences()}),this.init=function(){CContext.getSession().then(function(session){return _session=session,_session.getApplet()}).catch(function(error){throw $log.debug("Failed to get session: "+error.message+" ("+error.statusCode+")"),error}).then(function(applet){_applet=applet,_applet.propertySet({title:"Hello, World!"}),self.readPreferences(),self.initSlidebox(),_applet.hideSplash(1e3)}).catch(function(error){$log.debug("Failed to Initialize: "+error.message+" ("+error.statusCode+")")})},this.readPreferences=function(){_session.get("preferences").then(function(value){_prefs=value}).catch(function(error){$log.debug("Failed to read preferences: "+error.message+" ("+error.statusCode+")")})},this.savePreferences=function(){_session.set("preferences",_prefs),_session.flush()},this.initSlidebox=function(){self.slideIndex=0},this.next=function(){$ionicSlideBoxDelegate.next()},this.previous=function(){$ionicSlideBoxDelegate.previous()},this.slideChanged=function(index){self.slideIndex=index}});